{
	"info": {
		"_postman_id": "whatsapp-vvip-api-collection",
		"name": "WhatsApp Transfer VVIP - API Collection",
		"description": "Collection compl√®te pour tester l'API WhatsApp Transfer VVIP d√©ploy√©e sur Oracle Cloud",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "apikey",
		"apikey": [
			{
				"key": "key",
				"value": "x-api-key",
				"type": "string"
			},
			{
				"key": "value",
				"value": "mySuperSecretKey",
				"type": "string"
			},
			{
				"key": "in",
				"value": "header",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://79.72.25.202",
			"type": "string"
		},
		{
			"key": "api_key",
			"value": "mySuperSecretKey",
			"type": "string"
		},
		{
			"key": "test_phone",
			"value": "+212600000000",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "üè• Health & Status",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/health",
							"host": ["{{base_url}}"],
							"path": ["health"]
						}
					},
					"response": []
				},
				{
					"name": "Session Status - All",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/whatsapp/sessions/status",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "sessions", "status"]
						}
					},
					"response": []
				},
				{
					"name": "Session Status - Specific",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/whatsapp/session/vip-session/status",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "session", "vip-session", "status"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üì± Messages de Base",
			"item": [
				{
					"name": "Send Template Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"template\": \"Bonjour {{name}}, bienvenue chez {{company}}! üéâ\\n\\nVotre service {{service}} est maintenant actif.\",\n  \"params\": [\n    {\n      \"name\": \"Ahmed\",\n      \"company\": \"VIP Transfer Morocco\",\n      \"service\": \"Transport Premium\"\n    }\n  ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/send",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "send"]
						}
					},
					"response": []
				},
				{
					"name": "Send Rich Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"messageData\": {\n    \"text\": \"üöó *VIP Transfer Morocco*\\n\\n‚ú® Service de transport premium\\nüåü V√©hicules de luxe\\n‚è∞ Ponctualit√© garantie\\n\\nüåê R√©servez maintenant: https://vip-transfer-morocco.com\\nüìû Contact: +212 600 111 222\",\n    \"options\": {\n      \"linkPreview\": true\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/send-rich-message",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "send-rich-message"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üìä Fonctionnalit√©s Avanc√©es",
			"item": [
				{
					"name": "Send Poll",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"pollData\": {\n    \"question\": \"Quelle est votre destination pr√©f√©r√©e au Maroc?\",\n    \"options\": [\n      \"Casablanca\",\n      \"Rabat\",\n      \"Marrakech\",\n      \"Agadir\",\n      \"F√®s\",\n      \"Tanger\"\n    ]\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/send-poll",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "send-poll"]
						}
					},
					"response": []
				},
				{
					"name": "Send Location",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"locationData\": {\n    \"latitude\": 33.5731,\n    \"longitude\": -7.5898,\n    \"name\": \"A√©roport Mohammed V Casablanca\",\n    \"address\": \"Nouaceur, Casablanca 27000, Maroc\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/send-location",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "send-location"]
						}
					},
					"response": []
				},
				{
					"name": "Send Contact Card",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"contactData\": {\n    \"name\": \"VIP Transfer Support\",\n    \"phone\": \"+212600111222\",\n    \"email\": \"support@vip-transfer.ma\",\n    \"organization\": \"VIP Transfer Morocco\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/send-contact",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "send-contact"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üìã Templates Pr√©d√©finis",
			"item": [
				{
					"name": "Welcome Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"welcomeData\": {\n    \"name\": \"Ahmed Benali\",\n    \"company\": \"VIP Transfer Morocco\",\n    \"support_contact\": \"+212600111222\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/templates/welcome",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "templates", "welcome"]
						}
					},
					"response": []
				},
				{
					"name": "Order Confirmation",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"orderData\": {\n    \"orderNumber\": \"VIP-2025-001\",\n    \"customerName\": \"Ahmed Benali\",\n    \"items\": [\n      \"Transfer A√©roport Mohammed V ‚Üí H√¥tel Marriott\",\n      \"Service Premium avec chauffeur\",\n      \"V√©hicule Mercedes Class S\"\n    ],\n    \"total\": \"450 DH\",\n    \"deliveryTime\": \"14:30\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/templates/order-confirmation",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "templates", "order-confirmation"]
						}
					},
					"response": []
				},
				{
					"name": "Promotion Template",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"promoData\": {\n    \"title\": \"Offre Sp√©ciale √ât√© 2025\",\n    \"description\": \"25% de r√©duction sur tous les transferts a√©roport\",\n    \"discount\": \"25%\",\n    \"code\": \"ETE25\",\n    \"validUntil\": \"31/08/2025\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/templates/promotion",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "templates", "promotion"]
						}
					},
					"response": []
				},
				{
					"name": "Delivery Notification",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"deliveryData\": {\n    \"orderNumber\": \"VIP-2025-001\",\n    \"customerName\": \"Ahmed Benali\",\n    \"driverName\": \"Mohammed\",\n    \"driverPhone\": \"+212600555777\",\n    \"vehicleInfo\": \"Mercedes Class S - Noir - ABC-1234\",\n    \"estimatedTime\": \"10 minutes\",\n    \"location\": \"Devant l'entr√©e principale\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/templates/delivery-notification",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "templates", "delivery-notification"]
						}
					},
					"response": []
				},
				{
					"name": "Appointment Reminder",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"appointmentData\": {\n    \"customerName\": \"Ahmed Benali\",\n    \"appointmentDate\": \"05/08/2025\",\n    \"appointmentTime\": \"14:30\",\n    \"service\": \"Transfer A√©roport\",\n    \"location\": \"A√©roport Mohammed V\",\n    \"confirmationNumber\": \"CONF-789\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/templates/appointment-reminder",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "templates", "appointment-reminder"]
						}
					},
					"response": []
				},
				{
					"name": "Payment Request",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"paymentData\": {\n    \"customerName\": \"Ahmed Benali\",\n    \"invoiceNumber\": \"INV-2025-001\",\n    \"amount\": \"450 DH\",\n    \"dueDate\": \"10/08/2025\",\n    \"paymentLink\": \"https://pay.vip-transfer.ma/inv-001\",\n    \"service\": \"Transfer Premium A√©roport\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/templates/payment-request",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "templates", "payment-request"]
						}
					},
					"response": []
				},
				{
					"name": "Customer Satisfaction",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"satisfactionData\": {\n    \"customerName\": \"Ahmed Benali\",\n    \"service\": \"Transfer Premium\",\n    \"surveyLink\": \"https://survey.vip-transfer.ma/feedback\",\n    \"orderNumber\": \"VIP-2025-001\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/templates/customer-satisfaction",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "templates", "customer-satisfaction"]
						}
					},
					"response": []
				},
				{
					"name": "Newsletter",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"newsletterData\": {\n    \"title\": \"Newsletter VIP Transfer - Ao√ªt 2025\",\n    \"content\": \"D√©couvrez nos nouveaux services et destinations\",\n    \"highlights\": [\n      \"Nouveau service vers Agadir\",\n      \"V√©hicules √©lectriques disponibles\",\n      \"Programme de fid√©lit√© lanc√©\"\n    ],\n    \"readMoreLink\": \"https://newsletter.vip-transfer.ma/aug2025\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/templates/newsletter",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "templates", "newsletter"]
						}
					},
					"response": []
				},
				{
					"name": "Emergency Alert",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"emergencyData\": {\n    \"alertType\": \"Retard Transport\",\n    \"message\": \"Votre chauffeur sera en retard de 15 minutes √† cause des embouteillages\",\n    \"contactNumber\": \"+212600111222\",\n    \"alternativeOptions\": \"Un autre v√©hicule peut √™tre envoy√© si n√©cessaire\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/templates/emergency-alert",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "templates", "emergency-alert"]
						}
					},
					"response": []
				},
				{
					"name": "Birthday Wishes",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"senderId\": \"vip-session\",\n  \"recipients\": [\"{{test_phone}}\"],\n  \"birthdayData\": {\n    \"name\": \"Ahmed Benali\",\n    \"discountCode\": \"BIRTHDAY25\",\n    \"discountPercent\": \"25%\",\n    \"validUntil\": \"15/08/2025\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/whatsapp/templates/birthday-wishes",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "templates", "birthday-wishes"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üîß Session Management",
			"item": [
				{
					"name": "Disconnect Session",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/whatsapp/session/vip-session/disconnect",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "session", "vip-session", "disconnect"]
						}
					},
					"response": []
				},
				{
					"name": "Clear Session",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "x-api-key",
								"value": "{{api_key}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/whatsapp/session/vip-session/clear",
							"host": ["{{base_url}}"],
							"path": ["api", "whatsapp", "session", "vip-session", "clear"]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-set timestamp for requests",
					"pm.globals.set('timestamp', Math.floor(Date.now() / 1000));"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Common tests for all requests",
					"pm.test('Response time is acceptable', function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(5000);",
					"});",
					"",
					"pm.test('Response has correct content-type', function () {",
					"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
					"});",
					"",
					"// Test for successful responses",
					"if (pm.response.code === 200) {",
					"    pm.test('Status code is 200 OK', function () {",
					"        pm.response.to.have.status(200);",
					"    });",
					"}"
				]
			}
		}
	]
}
